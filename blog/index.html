<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Blogs :: Ismail Badawi</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://ismail.badawi.io/blog/" />




<link rel="stylesheet" href="https://ismail.badawi.io/assets/style.css">

  <link rel="stylesheet" href="https://ismail.badawi.io/assets/blue.css">






<link rel="apple-touch-icon" href="https://ismail.badawi.io/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://ismail.badawi.io/img/favicon/blue.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Blogs">
<meta property="og:description" content="" />
<meta property="og:url" content="https://ismail.badawi.io/blog/" />
<meta property="og:site_name" content="Ismail Badawi" />

  
    <meta property="og:image" content="https://ismail.badawi.io/img/favicon/blue.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">





  <link href="/blog/index.xml" rel="alternate" type="application/rss+xml" title="Ismail Badawi" />









</head>
<body class="blue">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Ismail Badawi
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
  
  <div class="posts">
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/easy-performance-fixes-guided-by-flame-graphs/">Easy Performance Fixes Guided By Flame Graphs</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2021-06-08
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/c/">c</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/badavi/">badavi</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/performance/">performance</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/profiling/">profiling</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/flamegraphs/">flamegraphs</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>When I was in grad school and struggling with my Master&rsquo;s thesis, I started a
small side project in order to distract myself and work on something that felt
more rewarding. This project was basically a clone of vim &ndash; a terminal-based
text editor I called <a href="https://github.com/isbadawi/badavi">badavi</a>. That was around seven years ago. I haven&rsquo;t
worked on it continuously since then, but I would occasionally go back and hack
on it in short little bursts. In particular I&rsquo;ve been doing this the last
couple of months, and I thought it might be interesting to write about some of
the things I&rsquo;ve been up to.</p>
<p>For this post, we&rsquo;ll look at some small performance fixes I made recently,
guided by <a href="https://en.wikipedia.org/wiki/Perf_(Linux)">perf</a> and <a href="http://www.brendangregg.com/flamegraphs.html">flame graphs</a>.</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/easy-performance-fixes-guided-by-flame-graphs/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/automatic-directory-creation-in-make/">Automatic Directory Creation in Make</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2017-03-28
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/make/">make</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>I like out-of-tree builds. Out-of-tree builds are nice for lots of reasons. You
can have multiple builds of the same project coexisting side-by-side &ndash; for
example a debug build for development, a release build, and an instrumented
build for code coverage runs. All the generated build artifacts are together
underneath one directory which you can easily delete without having to maintain
a <code>make clean</code> target, or place under <code>.gitignore</code> without having to maintain a
growing set of patterns for the different kinds of artifacts. I was going to
write a post about this, but came across
<a href="http://voices.canonical.com/jussi.pakkanen/2013/04/16/why-you-should-consider-using-separate-build-directories/">this one by Jussi Pakkanen</a> which covers a lot of the
ground I would have, so I&rsquo;ll just link to it here.</p>
<p>Instead, this post is about an issue that arises when implementing out-of-tree
builds in make, and the best approach I&rsquo;ve found for dealing with it.</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/automatic-directory-creation-in-make/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/unintended-stopiteration-in-a-generator/">Unintended Stopiteration in a Generator</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2016-03-27
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/python/">python</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>Sometimes, if I have a generator that I happen to know is non-empty, and I want
to get at the first element, I&rsquo;ll write code like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">output <span style="color:#f92672">=</span> next(f <span style="color:#66d9ef">for</span> f <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(dir) <span style="color:#66d9ef">if</span> f<span style="color:#f92672">.</span>endswith(<span style="color:#e6db74">&#39;.o&#39;</span>))
</code></pre></div>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/unintended-stopiteration-in-a-generator/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/read-only-file-in-writable-directory/">Read Only File in Writable Directory</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2016-03-25
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/unix/">unix</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>This is a small gotcha about file permissions I ran into recently.</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/read-only-file-in-writable-directory/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/a-bug-caused-by-using-0-instead-of-null/">A Bug Caused by Using 0 Instead of Null</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2015-09-08
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/c/">c</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>This is a quick post about a bug I ran into at work which turned out to be
caused by passing a literal <code>0</code> instead of <code>NULL</code> to a function. Here&rsquo;s a
small program reproducing it:</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/a-bug-caused-by-using-0-instead-of-null/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/when-optimizations-hide-bugs/">When Optimizations Hide Bugs</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2015-09-07
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/c/">c</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/compilers/">compilers</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>The past few months at work I&rsquo;ve been working with a large legacy codebase,
mostly written in C. In order to debug problems as they come up, I wanted to
use gdb &ndash; but it seemed like the program was only ever compiled with
optimizations turned on (<code>-O2</code>), which can make using gdb a frustrating
experience, as every interesting value you might want to examine has been
optimized out.</p>
<p>After grappling with the build system to pass <code>-O0</code> in all the right places (a
surprisingly difficult task), I found that the program did not link with
optimizations turned off. Once I got around that, I ran into a crash in some
basic functionality, easily reproducible at <code>-O0</code>, but not <code>-O2</code>. This post
contains two tiny contrived programs reproducing those issues.</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/when-optimizations-hide-bugs/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/the-compositional-nature-of-vim/">The Compositional Nature of Vim</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2014-04-23
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/vim/">vim</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          I use vim. I&rsquo;ve used vim since I started programming; the very first program I wrote &ndash; hello world in C, following along a cprogramming.com tutorial &ndash; was typed out in vim, inside a cygwin environment on Windows. Naturally, at first it was hard and intimidating. I didn&rsquo;t know how to do anything, least of all edit text. I learned about insert mode and normal mode. I learned about navigating using hjkl, and deleting the current line with dd, and saving and quitting with :wq, and for a long time that was it.
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/the-compositional-nature-of-vim/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/an-obscure-bug-story/">An Obscure Bug Story</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2014-02-04
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/google/">google</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/gwt/">gwt</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p>It&rsquo;s common to be asked a question like &ldquo;what&rsquo;s the hardest bug you&rsquo;ve debugged?&rdquo;
at job interviews in tech. This post is about the bug I usually describe.
The snag is that it&rsquo;s quite involved and I don&rsquo;t actually understand it all the
way through &ndash; there are one or two aspects to it I often hand-wavingly gloss over.
The hope was that by writing it out and fact checking it I&rsquo;d have a better handle
on it; this is what came out.</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/an-obscure-bug-story/">Read on →</a>
        </div>
        
      </div>
    
      <div class="post on-list">
        <h1 class="post-title">
          <a href="https://ismail.badawi.io/blog/writing-a-code-coverage-tool/">Writing a Code Coverage Tool</a>
        </h1>
        <div class="post-meta">
          <span class="post-date">
            2013-05-03
          </span>
          
        </div>

        
          <span class="post-tags">
            
            #<a href="https://ismail.badawi.io/tags/code/">code</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/java/">java</a>&nbsp;
            
            #<a href="https://ismail.badawi.io/tags/coverage/">coverage</a>&nbsp;
            
          </span>
        

        

        <div class="post-content">
          
          
          <p><em>Disclaimer: I&rsquo;m not quite sure who the audience is for this. I guess it&rsquo;s
describing a fun little project I put together, but it&rsquo;s also written kind of
like a tutorial, so you can maybe follow along. I don&rsquo;t think it&rsquo;s particularly
beginner-friendly, though. Some knowledge of Java is assumed, but not much.
The code is available <a href="https://github.com/isbadawi/coverage-example">on github</a>.</em></p>
<p>Code coverage is a software metric that measures how much, and which parts, of the source code
of a program were exercised in a given execution of that program.
There are many different flavors of coverage data, for example
tracking which lines or statements were executed, which
functions were called, which branches or control flow paths were taken. In
this post, we&rsquo;ll walk through writing a simplistic coverage collection tool
for Java.</p>
          
          
        </div>

        
        <div>
          <a class="read-more button"
            href="/blog/writing-a-code-coverage-tool/">Read on →</a>
        </div>
        
      </div>
    
    <div class="pagination">
  <div class="pagination__buttons">
    
    
  </div>
</div>

  </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ismail.badawi.io/assets/main.js"></script>
<script src="https://ismail.badawi.io/assets/prism.js"></script>







  
</div>

</body>
</html>
